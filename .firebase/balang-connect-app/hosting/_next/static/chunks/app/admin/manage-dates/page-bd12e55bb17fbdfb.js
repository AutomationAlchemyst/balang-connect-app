(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[913],{1718:function(e,t,r){Promise.resolve().then(r.bind(r,782))},9376:function(e,t,r){"use strict";var a=r(5475);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},158:function(e,t,r){"use strict";r.d(t,{XH:function(){return n},qt:function(){return i},tN:function(){return s}}),r(3079);var a=r(2119),n=(0,a.$)("4fc3642edb2165523f9154e0002a39be9911527a"),s=(0,a.$)("1a01405f7ddf81b38ddcb0d39f6e7df8d3babc39"),i=(0,a.$)("4127e276b091afbcd806873625340c60e0895b56")},782:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return _}});var a=r(7437),n=r(2265),s=r(5846),i=r(9376),o=r(8916),d=r(9820),l=r(6291),c=r(2381),u=r(3340),f=r(158),m=r(279),p=r(5060),h=r(3459),x=r(2228),v=r(2032),g=r(5255),b=r(6471);let y=(0,b.Z)("CalendarOff",[["path",{d:"M4.2 4.2A2 2 0 0 0 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 1.82-1.18",key:"16swn3"}],["path",{d:"M21 15.5V6a2 2 0 0 0-2-2H9.5",key:"yhw86o"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h7",key:"1wap6i"}],["path",{d:"M21 10h-5.5",key:"quycpq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),w=(0,b.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var j=r(5937),N=r(7107),k=r(1593);function S(e){let t=new Date(e);return t.setUTCHours(0,0,0,0),t.toISOString().split("T")[0]}function _(){let{isAdmin:e}=(0,s.A)(),t=(0,i.useRouter)(),{toast:r}=(0,u.pm)(),[b,_]=(0,n.useState)([]),[T,A]=(0,n.useState)([]),[Z,C]=(0,n.useState)(""),[R,E]=(0,n.useState)(!0),[D,O]=(0,n.useState)(null);(0,n.useEffect)(()=>{!1===e?t.push("/admin/login"):!0===e&&M()},[e,t]);let M=async()=>{E(!0),O(null);try{let e=await (0,f.tN)();_(e)}catch(e){console.error(e),O(e.message)}E(!1)},P=async()=>{if(!T||0===T.length){r({title:"No dates selected",description:"Please select one or more dates to block.",variant:"destructive"});return}E(!0);let e=await (0,f.qt)(T,Z);e.success?(r({title:"Success",description:e.message}),A([]),C(""),await M()):r({title:"Error",description:e.message,variant:"destructive",duration:15e3}),E(!1)},I=async()=>{if(!T||0===T.length){r({title:"No dates selected",description:"Please select dates from the calendar to unblock.",variant:"destructive"});return}let e=T.map(S);E(!0);let t=await (0,f.XH)(e);t.success?(r({title:"Success",description:t.message}),A([]),await M()):r({title:"Error",description:t.message,variant:"destructive",duration:15e3}),E(!1)},z=async e=>{E(!0);let t=await (0,f.XH)([e]);t.success?(r({title:"Success",description:t.message}),A(t=>null==t?void 0:t.filter(t=>S(t)!==e)),await M()):r({title:"Error",description:t.message,variant:"destructive",duration:15e3}),E(!1)};if(!0!==e)return(0,a.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,a.jsx)(h.Z,{className:"h-8 w-8 animate-spin"})});let H=b.map(e=>e.date);return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)(o.Z,{children:"Manage Blocked Dates"}),(0,a.jsxs)(j.bZ,{children:[(0,a.jsx)(x.Z,{className:"h-4 w-4"}),(0,a.jsx)(j.Cd,{children:"How to use this page"}),(0,a.jsx)(j.X,{children:"Select one or more dates on the calendar below. Blocked dates will appear in red. You can select existing red dates to unblock them, or select available dates to block them. Use the buttons to confirm your action. You can also manage all blocked dates in the list view at the bottom."})]}),D&&(0,a.jsxs)(j.bZ,{variant:"destructive",children:[(0,a.jsx)(v.Z,{className:"h-4 w-4"}),(0,a.jsx)(j.Cd,{children:"Error Loading Data"}),(0,a.jsxs)(j.X,{children:[(0,a.jsx)("p",{className:"mb-2",children:"There was a problem fetching the blocked dates from your Firestore database."}),(0,a.jsx)("pre",{className:"mt-2 whitespace-pre-wrap rounded-md bg-destructive/10 p-4 font-mono text-xs text-destructive-foreground",children:D})]})]}),(0,a.jsxs)(d.Zb,{children:[(0,a.jsxs)(d.Ol,{children:[(0,a.jsx)(d.ll,{children:"Date Selection"}),(0,a.jsx)(d.SZ,{children:"Select dates to block or unblock. Currently blocked dates are highlighted."})]}),(0,a.jsxs)(d.aY,{className:"flex flex-col md:flex-row gap-8 items-start",children:[(0,a.jsx)(l.f,{mode:"multiple",selected:T,onSelect:A,disabled:R||!!D,modifiers:{blocked:H},modifiersStyles:{blocked:{color:"hsl(var(--destructive-foreground))",backgroundColor:"hsl(var(--destructive))",opacity:1}},className:"rounded-md border"}),(0,a.jsxs)("div",{className:"space-y-4 flex-grow w-full",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(p._,{htmlFor:"reason",children:"Reason for Blocking (Optional)"}),(0,a.jsx)(m.I,{id:"reason",value:Z,onChange:e=>C(e.target.value),placeholder:"e.g., Public Holiday, Fully Booked",disabled:R||!!D})]}),(0,a.jsxs)(c.z,{onClick:P,className:"w-full",disabled:R||!(null==T?void 0:T.length)||!!D,children:[R?(0,a.jsx)(h.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(x.Z,{className:"mr-2 h-4 w-4"}),"Block Selected Dates"]}),(0,a.jsxs)(c.z,{onClick:I,variant:"outline",className:"w-full",disabled:R||!(null==T?void 0:T.length)||!!D,children:[R?(0,a.jsx)(h.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(g.Z,{className:"mr-2 h-4 w-4"}),"Unblock Selected Dates"]})]})]})]}),(0,a.jsx)(k.Separator,{}),(0,a.jsxs)(d.Zb,{children:[(0,a.jsxs)(d.Ol,{children:[(0,a.jsxs)(d.ll,{className:"flex items-center",children:[(0,a.jsx)(y,{className:"mr-2 h-6 w-6"}),"Currently Blocked Dates"]}),(0,a.jsx)(d.SZ,{children:"A list of all dates currently blocked in the system. Unblock them individually here."})]}),(0,a.jsx)(d.aY,{children:b.length>0?(0,a.jsx)("ul",{className:"space-y-2 max-h-96 overflow-y-auto pr-2",children:b.sort((e,t)=>e.date.getTime()-t.date.getTime()).map(e=>(0,a.jsxs)("li",{className:"flex items-center justify-between p-3 border rounded-md bg-secondary/30 hover:bg-secondary/50",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-primary",children:(0,N.WU)(e.date,"PPP")}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.reason||"No reason provided"})]}),(0,a.jsxs)(c.z,{variant:"destructive",size:"sm",onClick:()=>z(e.id),disabled:R,"aria-label":"Unblock ".concat((0,N.WU)(e.date,"PPP")),children:[(0,a.jsx)(w,{className:"mr-2 h-4 w-4"}),"Unblock"]})]},e.id))}):(0,a.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"No dates are currently blocked."})})]})]})}},8916:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(7437),n=r(3448);function s(e){let{as:t="h2",className:r,children:s,...i}=e;return(0,a.jsx)(t,{className:(0,n.cn)("font-headline text-3xl md:text-4xl font-bold text-primary mb-6 tracking-tight text-center",r),...i,children:s})}},5937:function(e,t,r){"use strict";r.d(t,{Cd:function(){return l},X:function(){return c},bZ:function(){return d}});var a=r(7437),n=r(2265),s=r(535),i=r(3448);let o=(0,s.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=n.forwardRef((e,t)=>{let{className:r,variant:n,...s}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(o({variant:n}),r),...s})});d.displayName="Alert";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",r),...n})});l.displayName="AlertTitle";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",r),...n})});c.displayName="AlertDescription"},2381:function(e,t,r){"use strict";r.d(t,{d:function(){return d},z:function(){return l}});var a=r(7437),n=r(2265),s=r(7053),i=r(535),o=r(3448);let d=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=n.forwardRef((e,t)=>{let{className:r,variant:n,size:i,asChild:l=!1,...c}=e,u=l?s.g7:"button";return(0,a.jsx)(u,{className:(0,o.cn)(d({variant:n,size:i,className:r})),ref:t,...c})});l.displayName="Button"},6291:function(e,t,r){"use strict";r.d(t,{f:function(){return l}});var a=r(7437);r(2265);var n=r(2521),s=r(6848),i=r(7811),o=r(3448),d=r(2381);function l(e){let{className:t,classNames:r,showOutsideDays:l=!0,...c}=e;return(0,a.jsx)(i._W,{showOutsideDays:l,className:(0,o.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,o.cn)((0,d.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,o.cn)((0,d.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"text-accent border border-accent",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...r},components:{IconLeft:e=>{let{className:t,...r}=e;return(0,a.jsx)(n.Z,{className:(0,o.cn)("h-4 w-4",t),...r})},IconRight:e=>{let{className:t,...r}=e;return(0,a.jsx)(s.Z,{className:(0,o.cn)("h-4 w-4",t),...r})}},...c})}l.displayName="Calendar"},9820:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return l},Zb:function(){return i},aY:function(){return c},eW:function(){return u},ll:function(){return d}});var a=r(7437),n=r(2265),s=r(3448);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});i.displayName="Card";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...n})});o.displayName="CardHeader";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight font-headline",r),...n})});d.displayName="CardTitle";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...n})});l.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...n})});c.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...n})});u.displayName="CardFooter"},279:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var a=r(7437),n=r(2265),s=r(3448);let i=n.forwardRef((e,t)=>{let{className:r,type:n,...i}=e;return(0,a.jsx)("input",{type:n,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});i.displayName="Input"},5060:function(e,t,r){"use strict";r.d(t,{_:function(){return l}});var a=r(7437),n=r(2265),s=r(6394),i=r(535),o=r(3448);let d=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.f,{ref:t,className:(0,o.cn)(d(),r),...n})});l.displayName=s.f.displayName},1593:function(e,t,r){"use strict";r.d(t,{Separator:function(){return o}});var a=r(7437),n=r(2265),s=r(5156),i=r(3448);let o=n.forwardRef((e,t)=>{let{className:r,orientation:n="horizontal",decorative:o=!0,...d}=e;return(0,a.jsx)(s.f,{ref:t,decorative:o,orientation:n,className:(0,i.cn)("shrink-0 bg-border","horizontal"===n?"h-[1px] w-full":"h-full w-[1px]",r),...d})});o.displayName=s.f.displayName},5846:function(e,t,r){"use strict";r.d(t,{A:function(){return d},AdminProvider:function(){return o}});var a=r(7437),n=r(2265),s=r(9376);let i=(0,n.createContext)(void 0);function o(e){let{children:t}=e,[r,o]=(0,n.useState)(!1),d=(0,s.useSearchParams)();return(0,n.useEffect)(()=>{if("true"===sessionStorage.getItem("isAdmin")){o(!0);return}"true"===d.get("admin")&&(o(!0),sessionStorage.setItem("isAdmin","true"))},[d]),(0,a.jsx)(i.Provider,{value:{isAdmin:r,setIsAdmin:o},children:t})}function d(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("useAdmin must be used within an AdminProvider");return e}},3340:function(e,t,r){"use strict";r.d(t,{pm:function(){return f}});var a=r(2265);let n=0,s=new Map,i=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],l={toasts:[]};function c(e){l=o(l,e),d.forEach(e=>{e(l)})}function u(e){let{...t}=e,r=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=a.useState(l);return a.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},3448:function(e,t,r){"use strict";r.d(t,{cn:function(){return s}});var a=r(1994),n=r(3335);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,a.W)(t))}},6394:function(e,t,r){"use strict";r.d(t,{f:function(){return o}});var a=r(2265),n=r(6840),s=r(7437),i=a.forwardRef((e,t)=>(0,s.jsx)(n.WV.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var o=i},6840:function(e,t,r){"use strict";r.d(t,{WV:function(){return o},jH:function(){return d}});var a=r(2265),n=r(4887),s=r(7053),i=r(7437),o=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let r=a.forwardRef((e,r)=>{let{asChild:a,...n}=e,o=a?s.g7:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(o,{...n,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function d(e,t){e&&n.flushSync(()=>e.dispatchEvent(t))}},2228:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(6471).Z)("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]])},3459:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(6471).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2032:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(6471).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])}},function(e){e.O(0,[708,107,594,971,117,744],function(){return e(e.s=1718)}),_N_E=e.O()}]);